# [AtCoder Beginner Contest 247 \- AtCoder](https://atcoder.jp/contests/abc247)

バーチャル参加。

|問題|結果|経過時間|
|:---:|:---:|:---:|
|A|1AC|1:40|
|B|1WA,1AC|9:39|
|C|1AC|20:01|
|D|1AC|27:10|
|E|1AC|58:51|
|F|1AC|96:57|

F解けた✨

## [A \- Move Right](https://atcoder.jp/contests/abc247/tasks/abc247_a)
整数で受け取って10で割り、4桁のゼロ埋めをすると良い。

## [B \- Unique Nicknames](https://atcoder.jp/contests/abc247/tasks/abc247_b)
各人について、姓か名の少なくとも一方は他の人の姓名のどちらにも一致しなければ可。
姓名が同じ人の扱いに注意。

問題文が読めない時は例を見れば親切に書いてある。

## [C \- 1 2 1 3 1 2 1](https://atcoder.jp/contests/abc247/tasks/abc247_c)
定義通りに $S$ を再帰的に作って間に合う。

$S_n$ の長さは $2^n-1$ なので、2進表記と関連づけられそうな雰囲気がある。
実際、

$$
S_{n,i} = (iが2で割り切れる回数) 
$$

になる。

## [D \- Cylinder](https://atcoder.jp/contests/abc247/tasks/abc247_d)
`(ボールに書かれた数, 個数)` のタプルをdequeで持って処理する。

## [E \- Max Min](https://atcoder.jp/contests/abc247/tasks/abc247_e)

$L$ を固定したとき、 $R$ のとりうる値は連続区間になる（という時点で `lower_bound` っぽさが漂う）。なぜなら、$[Y,X]$ 外の数が現れるまでは伸ばせるから。これを $[R_0, R_1)$ とすると、

$$
\begin{align*}
R_0 &= XとYが出揃う最小のインデックス\\
R_1 &= Xより大きいかYより小さい数が現れる最小のインデックス
\end{align*}
$$

となる。
- $A_i=X$ となる $i$
- $A_i=Y$ となる $i$
- $A_i>X$ または $A_i<Y$ となる $i$ 

をそれぞれ配列で持っておくと、`lower_bound` で $O(\log(N))$ で計算できる。全体で $O(N\log(N))$。

## [F \- Cards](https://atcoder.jp/contests/abc247/tasks/abc247_f)

考えたこと…

DPで解けるか？ ある $n$ までの数を揃える方法が分かったとして、$n+1$ は決められそうにない。カードの選び方を拘束する関係がループを含むので再帰に向いていなさそう。

グラフで考える。

- カードを頂点、書かれた数を辺にもつグラフ
- カードを辺、書かれた数を頂点にもつグラフ

どちらが良いか？　前者（実際はそんなに変わらない）。「カードを使う」を頂点を白色に、「使わない」を黒色に塗ることと考える。両端が黒色に塗られることがなければ良い。

どんな塗り方が可能か。試してみると、
- 連結成分ごとに考えればよいこと
- グラフの形状が円環に限られること

などに気付く。さらに、頂点数5までを観察すると、

1頂点（自己ループ）→ 1通り

2頂点→3通り

3頂点→4通り

4頂点→7通り

5頂点→11通り

で、リュカ数になっている（！）ことに気付く。

あとは、union-find で 連結成分のサイズを求めて、全ての積を取れば答え。